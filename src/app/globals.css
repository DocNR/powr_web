@import "tailwindcss";

@layer base {
  :root {
    --radius: 0.65rem;
    --background: oklch(1 0 0);
    --foreground: oklch(0.141 0.005 285.823);
    --card: oklch(1 0 0);
    --card-foreground: oklch(0.141 0.005 285.823);
    --popover: oklch(1 0 0);
    --popover-foreground: oklch(0.141 0.005 285.823);
    --primary: oklch(0.65 0.25 35);
    --primary-foreground: oklch(0.98 0.01 35);
    --secondary: oklch(0.967 0.001 286.375);
    --secondary-foreground: oklch(0.21 0.006 285.885);
    --muted: oklch(0.967 0.001 286.375);
    --muted-foreground: oklch(0.552 0.016 285.938);
    --accent: oklch(0.967 0.001 286.375);
    --accent-foreground: oklch(0.21 0.006 285.885);
    --destructive: oklch(0.577 0.245 27.325);
    --border: oklch(0.92 0.004 286.32);
    --input: oklch(0.92 0.004 286.32);
    --ring: oklch(0.65 0.25 35);
    --chart-1: oklch(0.646 0.222 41.116);
    --chart-2: oklch(0.6 0.118 184.704);
    --chart-3: oklch(0.398 0.07 227.392);
    --chart-4: oklch(0.828 0.189 84.429);
    --chart-5: oklch(0.769 0.188 70.08);
    --sidebar: oklch(0.985 0 0);
    --sidebar-foreground: oklch(0.141 0.005 285.823);
    --sidebar-primary: oklch(0.606 0.25 292.717);
    --sidebar-primary-foreground: oklch(0.969 0.016 293.756);
    --sidebar-accent: oklch(0.967 0.001 286.375);
    --sidebar-accent-foreground: oklch(0.21 0.006 285.885);
    --sidebar-border: oklch(0.92 0.004 286.32);
    --sidebar-ring: oklch(0.606 0.25 292.717);
    
    /* Workout Interface Semantic Colors */
    --workout-primary: oklch(0.6 0.118 184.704);      /* Interactive elements - blue */
    --workout-success: oklch(0.646 0.222 142.495);    /* Completion states - green */
    --workout-timer: oklch(0.65 0.25 35);             /* Timer display - orange (matches --primary) */
    --workout-surface: oklch(0.985 0 0);              /* Background surfaces - light gray */
    --workout-border: oklch(0.92 0.004 286.32);       /* Dividers - matches --border */
    --workout-text: oklch(0.141 0.005 285.823);       /* Primary text - matches --foreground */
    --workout-text-muted: oklch(0.552 0.016 285.938); /* Secondary text - matches --muted-foreground */
  }

  .dark {
    --background: oklch(0.141 0.005 285.823);
    --foreground: oklch(0.985 0 0);
    --card: oklch(0.21 0.006 285.885);
    --card-foreground: oklch(0.985 0 0);
    --popover: oklch(0.21 0.006 285.885);
    --popover-foreground: oklch(0.985 0 0);
    --primary: oklch(0.6 0.28 35);
    --primary-foreground: oklch(0.98 0.01 35);
    --secondary: oklch(0.274 0.006 286.033);
    --secondary-foreground: oklch(0.985 0 0);
    --muted: oklch(0.274 0.006 286.033);
    --muted-foreground: oklch(0.705 0.015 286.067);
    --accent: oklch(0.274 0.006 286.033);
    --accent-foreground: oklch(0.985 0 0);
    --destructive: oklch(0.704 0.191 22.216);
    --border: oklch(1 0 0 / 10%);
    --input: oklch(1 0 0 / 15%);
    --ring: oklch(0.6 0.28 35);
    --chart-1: oklch(0.488 0.243 264.376);
    --chart-2: oklch(0.696 0.17 162.48);
    --chart-3: oklch(0.769 0.188 70.08);
    --chart-4: oklch(0.627 0.265 303.9);
    --chart-5: oklch(0.645 0.246 16.439);
    --sidebar: oklch(0.21 0.006 285.885);
    --sidebar-foreground: oklch(0.985 0 0);
    --sidebar-primary: oklch(0.541 0.281 293.009);
    --sidebar-primary-foreground: oklch(0.969 0.016 293.756);
    --sidebar-accent: oklch(0.274 0.006 286.033);
    --sidebar-accent-foreground: oklch(0.985 0 0);
    --sidebar-border: oklch(1 0 0 / 10%);
    --sidebar-ring: oklch(0.541 0.281 293.009);
    
    /* Workout Interface Semantic Colors - Dark Mode */
    --workout-primary: oklch(0.696 0.17 162.48);       /* Interactive elements - blue (lighter) */
    --workout-success: oklch(0.769 0.188 70.08);       /* Completion states - green (lighter) */
    --workout-timer: oklch(0.6 0.28 35);               /* Timer display - orange (matches --primary) */
    --workout-surface: oklch(0.274 0.006 286.033);     /* Background surfaces - dark gray */
    --workout-border: oklch(1 0 0 / 10%);              /* Dividers - matches --border */
    --workout-text: oklch(0.985 0 0);                  /* Primary text - matches --foreground */
    --workout-text-muted: oklch(0.705 0.015 286.067);  /* Secondary text - matches --muted-foreground */
  }
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* PWA Mobile Optimizations */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

/* POWR UI Semantic Workout Styles */
@layer components {
  /* Workout Header Styles */
  .workout-header {
    @apply flex items-center justify-between p-4 border-b border-gray-200 bg-white;
  }
  
  .workout-header-back {
    @apply text-[var(--workout-secondary)] hover:text-[var(--workout-primary)];
  }
  
  .workout-header-timer {
    @apply flex-1 text-center mx-4;
  }
  
  .workout-timer-display {
    @apply text-2xl font-bold text-[var(--workout-timer)] font-mono;
  }
  
  .workout-progress-text {
    @apply text-sm text-[var(--workout-secondary)] mt-1;
  }
  
  .workout-header-finish {
    @apply bg-[var(--workout-primary)] hover:bg-[var(--workout-primary-hover)] text-white px-6 py-2 rounded-md font-medium;
  }
  
  /* Exercise Section Styles */
  .exercise-section {
    @apply bg-white rounded-lg border border-gray-200 p-4;
  }
  
  .exercise-section.active {
    @apply border-[var(--workout-primary)] bg-[var(--workout-primary)]/5;
  }
  
  .exercise-title {
    @apply text-lg font-semibold text-[var(--workout-primary)] mb-3;
  }
  
  .exercise-title.active {
    @apply text-[var(--workout-timer)];
  }
  
  /* Set Row Styles */
  .set-row {
    @apply flex items-center gap-3 py-2 px-3 rounded-md;
  }
  
  .set-row.completed {
    @apply bg-green-50 border border-green-200;
  }
  
  .set-row.active {
    @apply bg-[var(--workout-primary)]/10 border border-[var(--workout-primary)];
  }
  
  .set-number {
    @apply w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-sm font-medium text-gray-600;
  }
  
  .set-number.completed {
    @apply bg-green-500 text-white;
  }
  
  .set-number.active {
    @apply bg-[var(--workout-timer)] text-white;
  }
  
  .set-input {
    @apply w-16 text-center border border-gray-300 rounded px-2 py-1 text-sm;
  }
  
  .set-input:focus {
    @apply border-[var(--workout-primary)] ring-1 ring-[var(--workout-primary)] outline-none;
  }
  
  .set-complete-button {
    @apply bg-[var(--workout-primary)] hover:bg-[var(--workout-primary-hover)] text-white px-4 py-1 rounded text-sm font-medium;
  }
  
  .set-complete-button:disabled {
    @apply bg-gray-300 cursor-not-allowed;
  }
}

/* CSS Variables for Gym Personality Theming */
:root {
  /* Default Theme */
  --workout-primary: #3b82f6;
  --workout-primary-hover: #2563eb;
  --workout-secondary: #6b7280;
  --workout-timer: #059669;
  --workout-background: #ffffff;
  --workout-surface: #f9fafb;
}

/* Hardcore Gym Personality */
[data-gym-personality="hardcore"] {
  --workout-primary: #dc2626;
  --workout-primary-hover: #b91c1c;
  --workout-secondary: #374151;
  --workout-timer: #ea580c;
  --workout-background: #111827;
  --workout-surface: #1f2937;
}

/* Zen Gym Personality */
[data-gym-personality="zen"] {
  --workout-primary: #059669;
  --workout-primary-hover: #047857;
  --workout-secondary: #6b7280;
  --workout-timer: #0891b2;
  --workout-background: #f0fdf4;
  --workout-surface: #ecfdf5;
}

/* Corporate Gym Personality */
[data-gym-personality="corporate"] {
  --workout-primary: #4f46e5;
  --workout-primary-hover: #4338ca;
  --workout-secondary: #64748b;
  --workout-timer: #0f172a;
  --workout-background: #ffffff;
  --workout-surface: #f8fafc;
}

/* Boutique Gym Personality */
[data-gym-personality="boutique"] {
  --workout-primary: #be185d;
  --workout-primary-hover: #9d174d;
  --workout-secondary: #71717a;
  --workout-timer: #7c2d12;
  --workout-background: #fdf2f8;
  --workout-surface: #fce7f3;
}

@layer utilities {
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .pl-safe {
    padding-left: env(safe-area-inset-left);
  }
  
  .pr-safe {
    padding-right: env(safe-area-inset-right);
  }
  
  /* Mobile PWA specific styles */
  .pwa-mobile {
    /* Prevent text size adjustment on iOS */
    -webkit-text-size-adjust: 100%;
    
    /* Disable callouts and selection on iOS */
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    
    /* Disable tap highlight */
    -webkit-tap-highlight-color: transparent;
    
    /* Prevent bounce scrolling */
    overscroll-behavior: none;
    
    /* Smooth scrolling */
    scroll-behavior: smooth;
  }
  
  /* Allow text selection on specific elements */
  .text-selectable {
    -webkit-user-select: text;
    user-select: text;
  }
  
  /* Prevent zoom on input focus (iOS) */
  input, textarea, select {
    font-size: 16px; /* Prevents zoom on iOS */
  }
  
  /* Hide scrollbars but keep functionality */
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Touch action utilities for horizontal galleries */
  .touch-action-pan-x {
    touch-action: pan-x;
  }

  .touch-action-pan-y {
    touch-action: pan-y;
  }

  .touch-action-none {
    touch-action: none;
  }

  /* Horizontal gallery touch isolation - IMPROVED */
  .horizontal-gallery {
    touch-action: pan-x pan-y;
    overscroll-behavior-x: contain;
    overscroll-behavior-y: none;
    -webkit-overflow-scrolling: touch;
  }

  /* Alternative approach for better gesture handling */
  .horizontal-gallery-permissive {
    touch-action: manipulation;
    overscroll-behavior-x: contain;
    overscroll-behavior-y: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* iOS PWA specific styles */
@supports (-webkit-touch-callout: none) {
  /* iOS specific styles - safe optimizations only */
  body {
    /* Prevent rubber band scrolling without breaking scroll */
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }
}

/* Standalone PWA mode detection */
@media (display-mode: standalone) {
  /* Styles when app is installed as PWA */
  body {
    /* Additional PWA-specific styling */
    -webkit-user-select: none;
    user-select: none;
  }
  
  /* Allow selection on content areas */
  .content-area {
    -webkit-user-select: text;
    user-select: text;
  }
}
